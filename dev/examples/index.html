<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Examples · ECCO.jl</title><meta name="title" content="Examples · ECCO.jl"/><meta property="og:title" content="Examples · ECCO.jl"/><meta property="twitter:title" content="Examples · ECCO.jl"/><meta name="description" content="Documentation for ECCO.jl."/><meta property="og:description" content="Documentation for ECCO.jl."/><meta property="twitter:description" content="Documentation for ECCO.jl."/><meta property="og:url" content="https://gaelforget.github.io/ECCO.jl/examples/"/><meta property="twitter:url" content="https://gaelforget.github.io/ECCO.jl/examples/"/><link rel="canonical" href="https://gaelforget.github.io/ECCO.jl/examples/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ECCO.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Examples</a><ul class="internal"><li><a class="tocitem" href="#Simple-air-sea-flux-calculation"><span>Simple air-sea flux calculation</span></a></li><li><a class="tocitem" href="#Bulk-formulae"><span>Bulk formulae</span></a></li><li><a class="tocitem" href="#Optimization"><span>Optimization</span></a></li><li><a class="tocitem" href="#Lorenz"><span>Lorenz</span></a></li><li><a class="tocitem" href="#Budyko-Sellers-Energy-Balance-Model"><span>Budyko-Sellers Energy Balance Model</span></a></li><li><a class="tocitem" href="#Glacier"><span>Glacier</span></a></li></ul></li><li><a class="tocitem" href="../API/">API</a></li><li><a class="tocitem" href="../context/">context</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Examples</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Examples</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/gaelforget/ECCO.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/gaelforget/ECCO.jl/blob/main/docs/src/examples.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Simple-air-sea-flux-calculation"><a class="docs-heading-anchor" href="#Simple-air-sea-flux-calculation">Simple air-sea flux calculation</a><a id="Simple-air-sea-flux-calculation-1"></a><a class="docs-heading-anchor-permalink" href="#Simple-air-sea-flux-calculation" title="Permalink"></a></h2><p>Simple air sea flux calculation and it&#39;s adjoint, obtained via Enzyme.</p><pre><code class="language-julia hljs">using ECCO
(f,f_ad,x)=toy_problems.Enzyme_ex1()
f_x=f(x); f_ad_x=f_ad(x)[1][1]
println(&quot;f(x)=$f_x adfx=$f_ad_x&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">f(x)=-3.858024691358025e-6 adfx=3.858024691358025e-6</code></pre><h2 id="Bulk-formulae"><a class="docs-heading-anchor" href="#Bulk-formulae">Bulk formulae</a><a id="Bulk-formulae-1"></a><a class="docs-heading-anchor-permalink" href="#Bulk-formulae" title="Permalink"></a></h2><p>Air sea flux calculation derived using standard bulk formulae algorithm, and it&#39;s adjoint, obtained via Enzyme.</p><pre><code class="language-julia hljs">(f,f_ad,x)=toy_problems.Enzyme_ex2()
f_x=f(x...); f_ad_x=f_ad(x...)
println(&quot;f(x)=$(f_x) adfx=$(f_ad_x)&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">f(x)=1.2244888899523058e-9 adfx=((1.2244888899523058e-9, 8.970050297237849e-11),)</code></pre><pre><code class="language-julia hljs">(f,f_ad,x,y)=toy_problems.Enzyme_ex3()
f_x=f(x,y); f_ad_x=f_ad(x,y)
println(&quot;f(x)=$(f_x) adfx=$(f_ad_x)&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">f(x)=0.00915548218468587 adfx=[0.0, 0.0, 0.01831096436937174, 0.0]</code></pre><pre><code class="language-julia hljs">(f,f_ad,x,y)=toy_problems.Enzyme_ex4()
f_x=f(x,y); f_ad_x=f_ad(x,y)
println(&quot;f(x)=$(f_x) adfx=$(f_ad_x)&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">f(x)=-3.0606099804357885 adfx=[0.0, 917.7850566361462, -6.121219960871577, -0.44841281435892]</code></pre><pre><code class="language-julia hljs">(x,adx)=toy_problems.ForwardDiff_ex1()
println(&quot;x=$(x) adfx=$(adx)&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">x=[300.0, 0.001, 1.0, 10.0] adfx=[0.0, 458.8925283180731, -3.0606099804357885, -0.22420640717946003]</code></pre><pre><code class="language-julia hljs">(x,adx)=Zygote_examples.Zygote_ex1()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">([300.0, 0.001, 1.0, 10.0], [0.0, 458.8925283180731, -3.0606099804357885, -0.22420640717946])</code></pre><h2 id="Optimization"><a class="docs-heading-anchor" href="#Optimization">Optimization</a><a id="Optimization-1"></a><a class="docs-heading-anchor-permalink" href="#Optimization" title="Permalink"></a></h2><pre><code class="language-julia hljs">using ECCO
(f,x0,x1,result)=toy_problems.optim_ex1()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(ECCO.toy_problems.var&quot;#f#6&quot;(), [0.0, 0.0], [0.9999634355313174, 0.9999315506115275],  * Status: success

 * Candidate solution
    Final objective value:     3.525527e-09

 * Found with
    Algorithm:     Nelder-Mead

 * Convergence measures
    √(Σ(yᵢ-ȳ)²)/n ≤ 1.0e-08

 * Work counters
    Seconds run:   0  (vs limit Inf)
    Iterations:    60
    f(x) calls:    117
)</code></pre><pre><code class="language-julia hljs">h,h!,x0,x1,result=toy_problems.optim_ex2()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(ECCO.toy_problems.var&quot;#f#7&quot;(), ECCO.toy_problems.var&quot;#g!#8&quot;(), [0.0, 0.0], [0.999999999999928, 0.9999999999998559],  * Status: success

 * Candidate solution
    Final objective value:     5.191703e-27

 * Found with
    Algorithm:     L-BFGS

 * Convergence measures
    |x - x&#39;|               = 4.58e-11 ≰ 0.0e+00
    |x - x&#39;|/|x&#39;|          = 4.58e-11 ≰ 0.0e+00
    |f(x) - f(x&#39;)|         = 4.41e-19 ≰ 0.0e+00
    |f(x) - f(x&#39;)|/|f(x&#39;)| = 8.50e+07 ≰ 0.0e+00
    |g(x)|                 = 1.44e-13 ≤ 1.0e-08

 * Work counters
    Seconds run:   0  (vs limit Inf)
    Iterations:    24
    f(x) calls:    67
    ∇f(x) calls:   67
)</code></pre><pre><code class="language-julia hljs">h,h!,x0,x1,result=toy_problems.optim_ex3()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(ECCO.toy_problems.var&quot;#h#9&quot;(), ECCO.toy_problems.var&quot;#h!#10&quot;{ECCO.toy_problems.var&quot;#h#9&quot;}(ECCO.toy_problems.var&quot;#h#9&quot;()), [0.0, 0.0], [0.999999999999928, 0.9999999999998559],  * Status: success

 * Candidate solution
    Final objective value:     5.191703e-27

 * Found with
    Algorithm:     L-BFGS

 * Convergence measures
    |x - x&#39;|               = 4.58e-11 ≰ 0.0e+00
    |x - x&#39;|/|x&#39;|          = 4.58e-11 ≰ 0.0e+00
    |f(x) - f(x&#39;)|         = 4.41e-19 ≰ 0.0e+00
    |f(x) - f(x&#39;)|/|f(x&#39;)| = 8.50e+07 ≰ 0.0e+00
    |g(x)|                 = 1.44e-13 ≤ 1.0e-08

 * Work counters
    Seconds run:   0  (vs limit Inf)
    Iterations:    24
    f(x) calls:    67
    ∇f(x) calls:   67
)</code></pre><h2 id="Lorenz"><a class="docs-heading-anchor" href="#Lorenz">Lorenz</a><a id="Lorenz-1"></a><a class="docs-heading-anchor-permalink" href="#Lorenz" title="Permalink"></a></h2><p>See https://en.wikipedia.org/wiki/Lorenz<em>96</em>model</p><pre><code class="language-julia hljs">using ECCO, CairoMakie
xyz=Lorenz_models.L96()
lines(xyz[1,:],xyz[2,:],xyz[end,:])</code></pre><img src="5a2e9404.png" alt="Example block output"/><pre><code class="language-julia hljs">x,y,z=Lorenz_models.L63()
lines(x,y,z)</code></pre><img src="2bb8ab71.png" alt="Example block output"/><h2 id="Budyko-Sellers-Energy-Balance-Model"><a class="docs-heading-anchor" href="#Budyko-Sellers-Energy-Balance-Model">Budyko-Sellers Energy Balance Model</a><a id="Budyko-Sellers-Energy-Balance-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Budyko-Sellers-Energy-Balance-Model" title="Permalink"></a></h2><p>See <a href="https://brian-rose.github.io/ClimateLaboratoryBook/courseware/one-dim-ebm.html">this tutorial</a> for detailed explanations.</p><pre><code class="language-julia hljs">using ECCO, CairoMakie

(; Q, y) = Budyko_Sellers_models.params
Tsol,Tini,dTdt_ini,incr_t,incr=Budyko_Sellers_models.dTdt_demo(Q)

fig=Figure()
Axis(fig[1,1]); lines!(y,dTdt_ini)
Axis(fig[2,1]); lines!(y,Tini); lines!(y,Tsol,color=:red)
Axis(fig[3,1]); lines!(incr_t,incr)
fig</code></pre><img src="5cd9338e.png" alt="Example block output"/><h3 id="Parameter-Choices"><a class="docs-heading-anchor" href="#Parameter-Choices">Parameter Choices</a><a id="Parameter-Choices-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-Choices" title="Permalink"></a></h3><p>From B. Rose notebook :</p><p>R = 10^7 J/m2/K</p><p>From Walsh and Rackauckas :</p><ul><li>Figure 3. Equilibrium solutions (7) with albedo function (9) for five η-values. Note T∗ ηi (ηi) = Tc only for i = 2,5. <ul><li>Parameters: Q = 343, A = 202, B = 1.9, C = 3.04, αw = 0.32, αs = 0.62, Tc =−10.</li></ul></li><li>Figure 9. Equilibrium solutions of (2) with albedo function (34). Solid: η= 0.1. Dashed: η= 0.25. Dash-Dot: η= 0.4. <ul><li>Parameters: Q = 321,A = 167,B = 1.5,C = 2.25,M = 50,αw = 0.32,αi = 0.46,αs = 0.72,ρ= 0.35.</li></ul></li></ul><h3 id="Earlier-Implementations"><a class="docs-heading-anchor" href="#Earlier-Implementations">Earlier Implementations</a><a id="Earlier-Implementations-1"></a><a class="docs-heading-anchor-permalink" href="#Earlier-Implementations" title="Permalink"></a></h3><ul><li><a href="https://brian-rose.github.io/ClimateLaboratoryBook/courseware/one-dim-ebm.html">https://brian-rose.github.io/ClimateLaboratoryBook/courseware/one-dim-ebm.html</a></li><li><a href="https://github.com/ECCO-Summer-School/ESS25-Team_FLOW">https://github.com/ECCO-Summer-School/ESS25-Team_FLOW</a></li><li><a href="https://www.cise.ufl.edu/~luke.morris/2_4_2025/build/bsh/budyko_sellers_halfar/">https://www.cise.ufl.edu/~luke.morris/2_4_2025/build/bsh/budyko_sellers_halfar/</a></li></ul><h3 id="Related-References"><a class="docs-heading-anchor" href="#Related-References">Related References</a><a id="Related-References-1"></a><a class="docs-heading-anchor-permalink" href="#Related-References" title="Permalink"></a></h3><ul><li>discrete and continuous – on the Budyko-Bellers energy balance climate model with ice line coupling – James Walsh, Christopher Rackauckas – doi:10.3934/dcdsb.2015.20.2187</li><li>Theory of Energy-Balance Climate Models – Gerald R. North – 1975 – DOI: &lt;https://doi.org/10.1175/1520-0469(1975)032&lt;2033:TOEBCM&gt;2.0.CO;2&gt;</li><li>Predictability in a Solvable Stochastic Climate Model – Gerald R. North and Robert F. Cahalan – DOI: <a href="https://doi.org/10.1175/1520-0469(1981)038%3C0504:PIASSC%3E2.0.CO;2">https://doi.org/10.1175/1520-0469(1981)038%3C0504:PIASSC%3E2.0.CO;2</a></li></ul><h2 id="Glacier"><a class="docs-heading-anchor" href="#Glacier">Glacier</a><a id="Glacier-1"></a><a class="docs-heading-anchor-permalink" href="#Glacier" title="Permalink"></a></h2><p>Simple, 1D mountain glacier model inspired from the book Fundamentals of Glacier Dynamics,  by CJ van der Veen, and which was translated to Julia by S Gaikwad.</p><p>See https://sicopolis.readthedocs.io/en/latest/AD/tutorial_tapenade.html#mountain-glacier-model</p><pre><code class="language-julia hljs">using ECCO
V=glacier_model.forward_problem(0.002)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4.001702814498028</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../API/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.4 on <span class="colophon-date" title="Monday 2 June 2025 12:06">Monday 2 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
